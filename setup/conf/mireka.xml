<web-app xmlns="http://caucho.com/ns/resin"
	xmlns:resin="urn:java:com.caucho.resin"
	xmlns:mireka="urn:java:mireka"
	xmlns:subetha="urn:java:org.subethamail.smtp.server"
	>
	
	<system-property mireka.home="${mirekaHome}"/>
	<system-property logback.configurationFile="${__DIR__}/logback.xml"/>
	<dependency path="${__DIR__}/logback.xml" />

	<!-- uncomment if you enabled BufferedIO on a Logback log file -->
	<!--
	<listener listener-class="mireka.server.LogFlushingServletContextListener" />
	-->

	<system-property helo="mx1.example.com"/>

	<mireka:ClientFactory>
		<Named>clientFactory</Named>
		<mireka:helo>${helo}</mireka:helo>
		<!-- <mireka:bind>192.0.2.0</mireka:bind> -->
	</mireka:ClientFactory>
	
	<!--
		the next element can be commented out if none of the proxy 
		services are enabled
	-->
	<mireka:BackendServer>
		<Named>backendServer</Named>
		
		<mireka:host>backend.example.com</mireka:host>
		<mireka:clientFactory>
			#{clientFactory}
		</mireka:clientFactory>
	</mireka:BackendServer>
	
	<!--
		uncomment to run the RFC 4409 message submission PROXY service
		
		This service transmits messages to the backend server. 
		
		global-users of this submission service are accepted 
		recipients in the MX service

	-->
	<!--
	<system-property submissionServiceActive="true"/>
	<resin:import path="${__DIR__}/submission-proxy/global-users.xml" />
	<resin:import path="${__DIR__}/submission-proxy/submission.xml" />
	-->
	
	<!--
		uncomment to run the RFC 4409 message submission NON-PROXY 
		service

		This service directly transmits messages to the 
		mail servers of the recipient on the internet.
		
		global-users of this submission service are accepted 
		recipients in the MX service
	-->
	<!--
	<system-property submissionServiceActive="true"/>
	<resin:import path="${__DIR__}/submission/global-users.xml" />
	<resin:import path="${__DIR__}/submission/submission.xml" />
	-->
	
	<!--
		uncomment to run the MX proxy
	-->
	<!--
	<resin:import path="${__DIR__}/mx/mx.xml" />
	-->
	
</web-app>